<h1 id="haproxy">HAProxy</h1>
<p><a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://raw.githubusercontent.com/Luismcplopes/HAProxy/master/img/haproxy.jpg" alt="Github" /></a></p>
<ul>
<li><a href="#WebServers1">Instalar e configurar WebServers1</a></li>
<li><a href="#WebServers2">Instalar e configurar WebServers2</a></li>
<li><a href="#HAProxy">Instalar e configurar HAProxy</a></li>
<li><a href="#Testarestatisticas">Testar e consultar estatisticas</a></li>
</ul>
<p><a name="WebServers1"></a></p>
<h1 id="configuração-do-webservers1-e-virtualhost-test.dev">- Configuração do (WebServers1) e virtualhost test.dev</h1>
<pre><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</code></pre>
<h2 id="instalar-apache2">-Instalar apache2</h2>
<pre><code>sudo apt-get install apache2 -y</code></pre>
<h3 id="criar-directório-test.dev">-Criar directório test.dev</h3>
<pre><code>sudo mkdir /var/www/html/test.dev</code></pre>
<h3 id="definir-permissões">-Definir permissões</h3>
<pre><code>sudo chown -R $USER:$USER /var/www/html/test.dev &amp;&amp; sudo chmod -R 755 /var/www</code></pre>
<h3 id="criar-index.html">-Criar index.html</h3>
<pre><code>sudo vim /var/www/html/test.dev/index.html</code></pre>
<h3 id="criar-um-virtualhost-que-aponte-para-test.dev">-Criar um VirtualHost que aponte para test.dev</h3>
<pre><code>sudo nano /etc/apache2/sites-available/test.dev.conf</code></pre>
<h2 id="restart-no-apache2">Restart no apache2</h2>
<pre><code>sudo apache2ctl configtest
sudo a2ensite test.dev.conf
 /etc/init.d/apache2 restart
 ```

#  Configuração do (webservers2) e virtualhost test.dev
&lt;a name=&quot;WebServers2&quot;&gt;&lt;/a&gt;</code></pre>
<p>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</p>
<pre><code>## -Instalar apache2</code></pre>
<p>sudo apt-get install apache2 -y</p>
<pre><code>
### -Criar directório test.dev</code></pre>
<p>sudo mkdir /var/www/html/test.dev</p>
<pre><code>
### -Definir permissões</code></pre>
<p>sudo chown -R <span class="math"><em>U</em><em>S</em><em>E</em><em>R</em> : </span>USER /var/www/html/test.dev &amp;&amp; sudo chmod -R 755 /var/www</p>
<pre><code>
### -Criar index.html</code></pre>
<p>sudo vim /var/www/html/test.dev/index.html</p>
<pre><code>
### -Criar um VirtualHost que aponte para test.dev</code></pre>
<p>sudo nano /etc/apache2/sites-available/test.dev.conf</p>
<pre><code>
## Restart no apache2</code></pre>
<p>sudo apache2ctl configtest sudo a2ensite test.dev.conf /etc/init.d/apache2 restart</p>
<pre><code>

# -Instalar HAProxy
&lt;a name=&quot;HAProxy&quot;&gt;&lt;/a&gt;</code></pre>
<p>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</p>
<pre><code></code></pre>
<p>sudo apt-get install haproxy</p>
<pre><code>## -Configurar HAProxy

### -Adicionar ao ficheiro /etc/default/haproxy a linha:
ENABLED=1

### -Ficheiro de configuração:</code></pre>
<p>sudo cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg_bck</p>
<pre><code></code></pre>
<p>sudo rm /etc/haproxy/haproxy.cfg &amp;&amp; sudo vim /etc/haproxy/haproxy.cfg</p>
<pre><code>## - Restart ao serviço</code></pre>
<p>sudo service haproxy restart ```</p>
<h1 id="testar">Testar</h1>
<p><a name="Testarestatisticas"></a> <a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/all_haproxy.JPG" alt="Github" /></a></p>
<h2 id="teste-haproxy">Teste Haproxy</h2>
<pre><code>http://192.168.1.6/test.dev/</code></pre>
<p><a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/haproxy-websrv1.JPG" alt="Github" /></a> <a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/haproxy-websrv2.JPG" alt="Github" /></a> ## webserver1 http://192.168.1.10/test.dev/ <a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/websrv1.JPG" alt="Github" /></a><br />## webserver2 http://192.168.1.8/test.dev/ <a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/websrv2.JPG" alt="Github" /></a></p>
<h2 id="estatisticas">Estatisticas</h2>
<pre><code>admin:admin
http://192.168.1.6/haproxy?stats</code></pre>
<p><a href="https://github.com/Luismcplopes/HAProxy/"><img src="https://github.com/Luismcplopes/HAProxy/blob/master/img/srv-haproxy-stats.JPG" alt="Github" /></a></p>
<h5 id="mais-info">Mais Info</h5>
<ul>
<li>https://haproxy.debian.net/</li>
<li>https://upcloud.com/community/tutorials/haproxy-load-balancer-ubuntu/</li>
<li>https://pplware.sapo.pt/tutoriais/tutorial-balanceamento-de-carga-em-servidores-com-haproxy/</li>
</ul>
